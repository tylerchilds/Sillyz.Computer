<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Silly'z Computer</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="/styles/system.css" rel="stylesheet">
<style>
html {
  background: var(--theme, var(--wheel-5-3));
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 3rem;
  background: linear-gradient(rgba(0,0,0,.85), rgba(0,0,0, .5) 15%, transparent);
  pointer-events: none;
  z-index: 1000;
}
</style>
    <design-system></design-system>
  </head>
  <body>
    <header>
      <menu-user></menu-user>
      <menu-resource model="hypertext" view="fantasy-filesystem"></menu-resource>
    </header>
    <main id="main">
      <tutorial></tutorial>
      <script type="module" src="/packages/widgets/tutorial.js"></script>
    </main>
    <footer>
      <button class="interface-button bl" data-tooltip="Can I create?">+</button>
      <chalect-bar
        class="interface-bar"
        placement="above"
        strict="true"
        src="currentUser#rolodex"
        options="currentUser#collections"
      ></chalect-bar>
      <button class="interface-button br" data-tooltip="Can I remix?">Y</button>
    </footer>
    <script type="module">
			const bottomBar = document.querySelector('footer');
			const viewport = window.visualViewport;
			function viewportHandler() {
				const layoutViewport = document.getElementById('layoutViewport');

				// Since the bar is position: fixed we need to offset it by the visual
				// viewport's offset from the layout viewport origin.
				const offsetLeft = viewport.offsetLeft;
				const offsetTop = viewport.height
										- layoutViewport.getBoundingClientRect().height
										+ viewport.offsetTop;

				// You could also do this by setting style.left and style.top if you
				// use width: 100% instead.
				bottomBar.style.transform = `translate(${offsetLeft}px, ${offsetTop}px) scale(${1 / viewport.scale})`;
			}
			window.visualViewport.addEventListener('resize', viewportHandler);

    </script>
		<script type="module" src="/packages/tags/design-system.js"></script>
		<script type="module" src="/packages/widgets/menu-user.js"></script>
		<script type="module" src="/packages/widgets/menu-resource.js"></script>
		<script type="module" src="/packages/tags/chalect-bar.js"></script>

		<script type="module" src="/packages/widgets/fantasy-filesystem.js"></script>
  </body>
</html>
